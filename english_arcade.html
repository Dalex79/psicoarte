<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon English Arcade - Level 1</title>
    <style>
        :root {
            --neon-pink: #ff00ff;
            --neon-cyan: #00ffff;
            --neon-lime: #39ff14;
            --neon-yellow: #fff01f;
            --bg-dark: #050510;
            --panel-bg: rgba(255, 255, 255, 0.05);
        }

        * {
            box-sizing: border-box;
            user-select: none;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            text-align: center;
        }

        /* --- BACKGROUND ANIMATION --- */
        #bg-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 0.4; pointer-events: none;
        }

        /* --- SECTIONS --- */
        section {
            min-height: 95vh;
            padding: 40px 20px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            border-bottom: 2px solid var(--neon-cyan);
            position: relative;
        }

        h1 {
            font-size: 4rem; margin-bottom: 10px;
            color: transparent; -webkit-text-stroke: 2px var(--neon-pink);
            text-shadow: 0 0 20px var(--neon-pink);
            font-family: 'Courier New', monospace; letter-spacing: -2px;
        }
        
        h2 {
            font-size: 2.5rem; color: var(--neon-cyan);
            text-transform: uppercase; letter-spacing: 2px;
            margin-bottom: 20px; text-shadow: 0 0 10px var(--neon-cyan);
        }

        p { font-size: 1.2rem; max-width: 700px; color: #ccc; margin-bottom: 20px; }

        /* --- UI ELEMENTS --- */
        .game-container {
            width: 100%; max-width: 800px;
            background: var(--panel-bg);
            border: 2px solid var(--neon-lime);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 30px rgba(57, 255, 20, 0.1);
            position: relative;
        }

        button {
            background: transparent; color: white;
            border: 2px solid white;
            padding: 10px 20px; font-size: 1rem; font-weight: bold;
            cursor: pointer; transition: 0.2s; margin: 5px;
            text-transform: uppercase; letter-spacing: 1px;
            border-radius: 5px;
        }
        button:hover {
            background: white; color: black;
            box-shadow: 0 0 20px white;
        }
        
        /* SPECIFIC COLORS */
        .btn-pink { border-color: var(--neon-pink); color: var(--neon-pink); }
        .btn-pink:hover { background: var(--neon-pink); color: white; }
        
        .btn-cyan { border-color: var(--neon-cyan); color: var(--neon-cyan); }
        .btn-cyan:hover { background: var(--neon-cyan); color: black; }

        /* --- 1. VERB DJ --- */
        .dj-deck {
            display: flex; justify-content: space-around; align-items: center;
            margin-top: 20px; gap: 20px; flex-wrap: wrap;
        }
        .turntable {
            width: 150px; height: 150px;
            border-radius: 50%; border: 5px solid #333;
            background: radial-gradient(circle, #222, #000);
            display: flex; justify-content: center; align-items: center;
            animation: spin 2s linear infinite; animation-play-state: paused;
        }
        .turntable.spinning { animation-play-state: running; border-color: var(--neon-pink); box-shadow: 0 0 20px var(--neon-pink); }
        
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .question-box {
            font-size: 1.5rem; background: black; padding: 15px; border: 1px solid var(--neon-cyan);
            margin-bottom: 15px; border-radius: 10px;
        }

        /* --- 2. VOCAB INVADERS --- */
        #invaders-canvas {
            background: #000; border: 2px solid var(--neon-lime);
            cursor: crosshair; width: 100%; height: 400px;
        }

        /* --- 3. GRAFFITI GRAMMAR --- */
        .wall-area {
            min-height: 200px; background: url('https://www.transparenttextures.com/patterns/brick-wall.png'), #111;
            border: 4px solid #333; margin-bottom: 20px;
            display: flex; justify-content: center; align-items: center;
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif; /* Graffiti vibe */
            font-size: 2rem; color: var(--neon-yellow); text-shadow: 2px 2px 0 black;
        }
        .word-bank { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        .drag-word {
            background: #222; border: 1px solid var(--neon-cyan); padding: 10px;
            cursor: grab; border-radius: 5px;
        }

        /* --- 4. IRREGULAR SLOTS --- */
        .slot-machine {
            display: flex; gap: 10px; justify-content: center; background: #222;
            padding: 20px; border-radius: 10px; border: 4px solid var(--neon-yellow);
        }
        .reel {
            width: 120px; height: 100px; background: white; color: black;
            font-size: 1.2rem; display: flex; justify-content: center; align-items: center;
            border: 2px solid #555; font-weight: bold; overflow: hidden;
        }
        
        .toast {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: white; color: black; padding: 10px 20px; border-radius: 50px;
            font-weight: bold; opacity: 0; transition: 0.3s; pointer-events: none; z-index: 100;
        }

    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <!-- HERO -->
    <section>
        <h1>NEON ENGLISH<br>ARCADE</h1>
        <h2>Level 1: The Cyber-Review</h2>
        <p>Welcome, Student 1.0. Complete the challenges to upgrade your English skills.</p>
        <div style="display: flex; flex-wrap: wrap; justify-content: center;">
            <button class="btn-pink" onclick="scrollToSection('dj')">ðŸŽ§ Verb DJ</button>
            <button class="btn-lime" style="border-color:var(--neon-lime); color:var(--neon-lime)" onclick="scrollToSection('invaders')">ðŸ‘¾ Vocab Invaders</button>
            <button class="btn-cyan" onclick="scrollToSection('graffiti')">ðŸŽ¨ Graffiti Grammar</button>
            <button class="btn-yellow" style="border-color:var(--neon-yellow); color:var(--neon-yellow)" onclick="scrollToSection('slots')">ðŸŽ° Irregular Slots</button>
        </div>
    </section>

    <!-- 1. VERB DJ -->
    <section id="dj">
        <h2>ðŸŽ§ The Verb DJ</h2>
        <p>Choose the correct form (Present Simple vs Continuous) to drop the beat.</p>
        
        <div class="game-container">
            <div class="dj-deck">
                <div class="turntable" id="deck1"></div>
                <div style="flex:1">
                    <div id="dj-question" class="question-box">Loading track...</div>
                    <div id="dj-options">
                        <!-- Options generated by JS -->
                    </div>
                </div>
                <div class="turntable" id="deck2"></div>
            </div>
            <p id="dj-feedback" style="margin-top:10px; font-weight:bold; min-height:20px;"></p>
        </div>
    </section>

    <!-- 2. VOCAB INVADERS -->
    <section id="invaders">
        <h2>ðŸ‘¾ Vocab Invaders</h2>
        <p>Mission: Shoot only the <span id="target-type" style="color:var(--neon-lime); font-weight:bold;">VERBS</span>!</p>
        
        <div class="game-container" style="padding:0; border:none;">
            <canvas id="invaders-canvas" width="800" height="400"></canvas>
            <div style="position:absolute; top:10px; left:10px; color:white; font-family:monospace;">
                SCORE: <span id="invader-score">0</span>
            </div>
            <button onclick="startInvaders()" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);" id="start-inv-btn">START GAME</button>
        </div>
    </section>

    <!-- 3. GRAFFITI GRAMMAR -->
    <section id="graffiti">
        <h2>ðŸŽ¨ Graffiti Grammar</h2>
        <p>Click the words in the correct order (Subject + Verb + Object) to paint the wall.</p>
        
        <div class="game-container">
            <div id="wall" class="wall-area">
                <!-- Painted sentence appears here -->
            </div>
            <div id="graffiti-words" class="word-bank">
                <!-- Words go here -->
            </div>
            <button onclick="resetGraffiti()" style="margin-top:20px; border-color:var(--neon-cyan);">Reset Wall</button>
        </div>
    </section>

    <!-- 4. IRREGULAR SLOTS -->
    <section id="slots">
        <h2>ðŸŽ° Irregular Verb Casino</h2>
        <p>Spin to match: Base Form - Past Simple - Past Participle.</p>
        
        <div class="game-container">
            <div class="slot-machine">
                <div class="reel" id="reel1">GO</div>
                <div class="reel" id="reel2">WENT</div>
                <div class="reel" id="reel3">GONE</div>
            </div>
            <div style="margin-top:20px;">
                <button class="btn-yellow" onclick="spinSlots()">ðŸŽ° SPIN!</button>
            </div>
            <p id="slot-msg" style="color:var(--neon-yellow); font-weight:bold; margin-top:10px;">Ready to gamble with grammar?</p>
        </div>
    </section>

    <div id="toast" class="toast">Good Job!</div>

    <script>
        // --- UTILS ---
        const playTone = (freq, type='sine', dur=0.1) => {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.frequency.value = freq; osc.type = type;
            gain.gain.value = 0.1; gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + dur);
            osc.connect(gain); gain.connect(ctx.destination);
            osc.start(); osc.stop(ctx.currentTime + dur);
        };

        function showToast(msg, isGood=true) {
            const t = document.getElementById('toast');
            t.innerText = msg; 
            t.style.color = isGood ? 'green' : 'red';
            t.style.opacity = 1; t.style.bottom = '50px';
            setTimeout(() => { t.style.opacity = 0; t.style.bottom = '20px'; }, 2000);
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({behavior: 'smooth'});
        }

        // --- BACKGROUND ---
        const bgCanvas = document.getElementById('bg-canvas');
        const bgCtx = bgCanvas.getContext('2d');
        bgCanvas.width = window.innerWidth; bgCanvas.height = window.innerHeight;
        let particles = [];

        class BinaryParticle {
            constructor() {
                this.x = Math.random() * bgCanvas.width;
                this.y = Math.random() * bgCanvas.height;
                this.v = Math.random() * 2 + 1;
                this.text = Math.random() > 0.5 ? '1' : '0';
                this.color = Math.random() > 0.5 ? '#00ffff' : '#ff00ff';
                this.size = Math.random() * 15 + 10;
            }
            update() {
                this.y += this.v;
                if(this.y > bgCanvas.height) this.y = -20;
            }
            draw() {
                bgCtx.fillStyle = this.color;
                bgCtx.font = `${this.size}px monospace`;
                bgCtx.fillText(this.text, this.x, this.y);
            }
        }
        
        for(let i=0; i<50; i++) particles.push(new BinaryParticle());

        function animBg() {
            bgCtx.clearRect(0, 0, bgCanvas.width, bgCanvas.height);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animBg);
        }
        animBg();

        // --- 1. VERB DJ ---
        const djQuestions = [
            { q: "Listen! She ___ the piano.", ans: "is playing", wrong: "plays" },
            { q: "I usually ___ coffee in the morning.", ans: "drink", wrong: "am drinking" },
            { q: "They ___ TV right now.", ans: "are watching", wrong: "watch" },
            { q: "Water ___ at 100 degrees Celsius.", ans: "boils", wrong: "is boiling" },
            { q: "Look! The bus ___.", ans: "is coming", wrong: "comes" }
        ];
        let currentDJ = 0;

        function loadDJ() {
            const q = djQuestions[currentDJ];
            document.getElementById('dj-question').innerText = q.q;
            const opts = document.getElementById('dj-options');
            opts.innerHTML = '';
            
            // Randomize buttons
            const isFirstCorrect = Math.random() > 0.5;
            const btn1 = createDJBtn(isFirstCorrect ? q.ans : q.wrong, isFirstCorrect);
            const btn2 = createDJBtn(isFirstCorrect ? q.wrong : q.ans, !isFirstCorrect);
            
            opts.appendChild(btn1);
            opts.appendChild(btn2);
        }

        function createDJBtn(text, isCorrect) {
            const btn = document.createElement('button');
            btn.innerText = text;
            btn.className = "btn-pink";
            btn.onclick = () => checkDJ(isCorrect);
            return btn;
        }

        function checkDJ(isCorrect) {
            const decks = document.querySelectorAll('.turntable');
            const feed = document.getElementById('dj-feedback');
            
            if(isCorrect) {
                decks.forEach(d => d.classList.add('spinning'));
                feed.innerText = "YEAH! Dropping the beat! ðŸŽµ";
                feed.style.color = "var(--neon-lime)";
                playTone(400, 'square', 0.2);
                setTimeout(() => {
                    currentDJ = (currentDJ + 1) % djQuestions.length;
                    loadDJ();
                    decks.forEach(d => d.classList.remove('spinning'));
                    feed.innerText = "";
                }, 1500);
            } else {
                decks.forEach(d => d.classList.remove('spinning'));
                feed.innerText = "Record Scratch! Try again. ðŸš«";
                feed.style.color = "var(--neon-red)";
                playTone(150, 'sawtooth', 0.5);
            }
        }
        loadDJ();

        // --- 2. VOCAB INVADERS ---
        const invCanvas = document.getElementById('invaders-canvas');
        const invCtx = invCanvas.getContext('2d');
        let invGameOn = false;
        let invScore = 0;
        let words = [];
        let bullets = [];
        let playerX = 400;
        
        // Vocab Data
        const vocab = [
            { word: "RUN", type: "VERB" }, { word: "EAT", type: "VERB" }, { word: "STUDY", type: "VERB" },
            { word: "HAPPY", type: "ADJ" }, { word: "FAST", type: "ADJ" }, { word: "RED", type: "ADJ" },
            { word: "CAR", type: "NOUN" }, { word: "DOG", type: "NOUN" }, { word: "HOUSE", type: "NOUN" }
        ];
        let currentTarget = "VERB"; // Can change
        
        function startInvaders() {
            if(invGameOn) return;
            invGameOn = true;
            document.getElementById('start-inv-btn').style.display = 'none';
            invScore = 0;
            words = []; bullets = [];
            document.getElementById('invader-score').innerText = 0;
            invLoop();
            spawnWord();
        }

        function spawnWord() {
            if(!invGameOn) return;
            const item = vocab[Math.floor(Math.random()*vocab.length)];
            words.push({ 
                x: Math.random() * (invCanvas.width - 50), 
                y: 0, 
                text: item.word, 
                type: item.type,
                color: item.type === currentTarget ? '#39ff14' : '#ff00ff'
            });
            setTimeout(spawnWord, 1500);
        }

        function invLoop() {
            if(!invGameOn) return;
            invCtx.fillStyle = '#050510';
            invCtx.fillRect(0,0, invCanvas.width, invCanvas.height);

            // Player
            invCtx.fillStyle = 'white';
            invCtx.beginPath();
            invCtx.moveTo(playerX, 380);
            invCtx.lineTo(playerX - 20, 400);
            invCtx.lineTo(playerX + 20, 400);
            invCtx.fill();

            // Bullets
            invCtx.fillStyle = 'yellow';
            bullets.forEach((b, i) => {
                b.y -= 5;
                invCtx.fillRect(b.x, b.y, 4, 10);
                if(b.y < 0) bullets.splice(i,1);
            });

            // Words
            invCtx.font = "20px Courier New";
            words.forEach((w, i) => {
                w.y += 1.5;
                invCtx.fillStyle = w.color;
                invCtx.fillText(w.text, w.x, w.y);

                // Collision
                bullets.forEach((b, bi) => {
                    if(b.x > w.x && b.x < w.x + 50 && b.y < w.y && b.y > w.y - 20) {
                        // Hit!
                        bullets.splice(bi, 1);
                        words.splice(i, 1);
                        if(w.type === currentTarget) {
                            invScore += 100;
                            playTone(600, 'sine', 0.1);
                        } else {
                            invScore -= 50;
                            playTone(100, 'sawtooth', 0.3);
                        }
                        document.getElementById('invader-score').innerText = invScore;
                    }
                });

                if(w.y > 400) words.splice(i, 1);
            });

            requestAnimationFrame(invLoop);
        }

        invCanvas.addEventListener('mousemove', e => {
            const rect = invCanvas.getBoundingClientRect();
            playerX = e.clientX - rect.left;
        });
        invCanvas.addEventListener('mousedown', () => {
            if(invGameOn) {
                bullets.push({x: playerX, y: 380});
                playTone(300, 'square', 0.05);
            }
        });

        // --- 3. GRAFFITI GRAMMAR ---
        const sentences = [
            { text: "SHE PLAYS GUITAR", parts: ["SHE", "PLAYS", "GUITAR"] },
            { text: "WE ARE STUDENTS", parts: ["WE", "ARE", "STUDENTS"] },
            { text: "I LIKE PIZZA", parts: ["I", "LIKE", "PIZZA"] }
        ];
        let currentGraffiti = 0;
        let builtSentence = [];

        function loadGraffiti() {
            builtSentence = [];
            document.getElementById('wall').innerText = "";
            const box = document.getElementById('graffiti-words');
            box.innerHTML = "";
            
            // Shuffle
            const s = sentences[currentGraffiti];
            const shuffled = [...s.parts].sort(() => Math.random() - 0.5);
            
            shuffled.forEach(word => {
                const wDiv = document.createElement('div');
                wDiv.className = 'drag-word';
                wDiv.innerText = word;
                wDiv.onclick = () => addToWall(word, wDiv);
                box.appendChild(wDiv);
            });
        }

        function addToWall(word, el) {
            builtSentence.push(word);
            el.style.display = 'none';
            document.getElementById('wall').innerText = builtSentence.join(" ");
            playTone(400, 'triangle', 0.1); // Spray sound placeholder

            // Check
            const target = sentences[currentGraffiti].parts;
            if(builtSentence.length === target.length) {
                if(builtSentence.join(" ") === sentences[currentGraffiti].text) {
                    showToast("MASTERPIECE! ðŸŽ¨");
                    document.getElementById('wall').style.color = "#39ff14";
                    document.getElementById('wall').style.textShadow = "0 0 20px #39ff14";
                    setTimeout(() => {
                        currentGraffiti = (currentGraffiti + 1) % sentences.length;
                        document.getElementById('wall').style.color = "var(--neon-yellow)";
                        document.getElementById('wall').style.textShadow = "2px 2px 0 black";
                        loadGraffiti();
                    }, 2000);
                } else {
                    showToast("Grammar Error! âŒ", false);
                    setTimeout(resetGraffiti, 1000);
                }
            }
        }

        function resetGraffiti() {
            loadGraffiti();
        }
        loadGraffiti();

        // --- 4. IRREGULAR SLOTS ---
        const verbList = [
            {v1: "GO", v2: "WENT", v3: "GONE"},
            {v1: "EAT", v2: "ATE", v3: "EATEN"},
            {v1: "SEE", v2: "SAW", v3: "SEEN"},
            {v1: "DO", v2: "DID", v3: "DONE"},
            {v1: "BREAK", v2: "BROKE", v3: "BROKEN"}
        ];

        function spinSlots() {
            const r1 = document.getElementById('reel1');
            const r2 = document.getElementById('reel2');
            const r3 = document.getElementById('reel3');
            const msg = document.getElementById('slot-msg');
            
            msg.innerText = "Spinning...";
            
            let i = 0;
            const interval = setInterval(() => {
                r1.innerText = verbList[Math.floor(Math.random()*verbList.length)].v1;
                r2.innerText = verbList[Math.floor(Math.random()*verbList.length)].v2;
                r3.innerText = verbList[Math.floor(Math.random()*verbList.length)].v3;
                playTone(200 + i*10, 'square', 0.05);
                i++;
                if(i > 20) {
                    clearInterval(interval);
                    finalizeSlots();
                }
            }, 100);
        }

        function finalizeSlots() {
            // Force a result logic (Game logic: random pick a full verb set or random mess)
            // To make it educational, let's actually pick random parts and check logic
            const idx1 = Math.floor(Math.random()*verbList.length);
            const idx2 = Math.floor(Math.random()*verbList.length);
            const idx3 = Math.floor(Math.random()*verbList.length);

            const r1 = document.getElementById('reel1');
            const r2 = document.getElementById('reel2');
            const r3 = document.getElementById('reel3');
            const msg = document.getElementById('slot-msg');

            r1.innerText = verbList[idx1].v1;
            r2.innerText = verbList[idx2].v2;
            r3.innerText = verbList[idx3].v3;

            if(idx1 === idx2 && idx2 === idx3) {
                msg.innerText = "JACKPOT! CORRECT VERB! ðŸŽ‰";
                msg.style.color = "#39ff14";
                playTone(600, 'sawtooth', 0.5);
            } else {
                msg.innerText = "Mismatch! Try again. ðŸŽ°";
                msg.style.color = "var(--neon-pink)";
            }
        }

        // Resize
        window.addEventListener('resize', () => {
            bgCanvas.width = window.innerWidth; bgCanvas.height = window.innerHeight;
        });

    </script>
</body>
</html>